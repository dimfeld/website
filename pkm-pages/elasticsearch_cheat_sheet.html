---
title: "Elasticsearch Cheat Sheet"
tags: cheat sheet, Elasticsearch
date: 2021-01-06
updated: 2021-01-06
---


  <ul class="list-bullet">
    <li>Shard Allocation Issues
      <ul class="list-bullet">
        <li><code>http &#39;localhost:9200/_cluster/allocation/explain?pretty&#39;</code> will explain things with an easy-to-understand vocabulary</li>
      </ul>
    </li>
    <li>Rolling Minor Version Upgrade
      <ul class="list-bullet">
        <li><code>echo &#39;{&quot;persistent&quot;:{&quot;cluster.routing.allocation.enable&quot;: &quot;primaries&quot;}}&#39; | http PUT localhost:9200/_cluster/settings</code></li>
        <li><code>http POST localhost:9200/_flush/synced</code> - First time only</li>
        <li>Upgrade a node</li>
        <li><code>echo &#39;{&quot;persistent&quot;:{&quot;cluster.routing.allocation.enable&quot;: null}}&#39; | http PUT localhost:9200/_cluster/settings</code></li>
        <li>Wait for the node to recover</li>
        <li>Repeat until all nodes are upgraded</li>
      </ul>
    </li>
  </ul>


