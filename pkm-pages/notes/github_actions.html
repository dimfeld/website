---
title: "Github Actions"
tags: programming
date: 2021-01-26
updated: 2023-02-10
---


  <ul class="list-bullet">
    <li>Each workflow is in a YAML file</li>
    <li>Here&#39;s an example that builds Rust binaries for each platform
      <ul class="list-bullet">
        <li><pre><code><span class="hljs-source hljs-yaml"><span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">Build release binaries</span>

<span class="hljs-comment hljs-line hljs-number-sign hljs-yaml"><span class="hljs-punctuation hljs-definition hljs-comment hljs-line hljs-number-sign hljs-yaml">#</span> The events to trigger the workflow
</span><span class="hljs-comment hljs-line hljs-number-sign hljs-yaml"><span class="hljs-punctuation hljs-definition hljs-comment hljs-line hljs-number-sign hljs-yaml">#</span> repository_dispatch is a manual trigger that you do via an API call
</span><span class="hljs-constant hljs-language hljs-boolean hljs-yaml">on</span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
  <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">repository_dispatch</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">types</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-meta hljs-flow-sequence hljs-yaml"><span class="hljs-punctuation hljs-definition hljs-sequence hljs-begin hljs-yaml">[</span><span class="hljs-string hljs-unquoted hljs-plain hljs-in hljs-yaml">tag-created</span><span class="hljs-punctuation hljs-definition hljs-sequence hljs-end hljs-yaml">]</span></span>

<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">jobs</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
  <span class="hljs-comment hljs-line hljs-number-sign hljs-yaml"><span class="hljs-punctuation hljs-definition hljs-comment hljs-line hljs-number-sign hljs-yaml">#</span> Can define multiple jobs
</span>  <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">release</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">Build and Release</span>
<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">runs-on</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">${{ matrix.os }}</span>
<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">strategy</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
  <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">matrix</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
    <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">include</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
      <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">os</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">ubuntu-latest</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">artifact_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">asset_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes-linux-amd64</span>
      <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">os</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">macos-latest</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">artifact_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">asset_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes-macos-amd64</span>
      <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">os</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">windows-latest</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">artifact_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes.exe</span>
        <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">asset_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">export-roam-notes-windows-amd64.exe</span>
<span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">steps</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
  <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">Checkout</span>
    <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">uses</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">actions/checkout@v2</span>
  <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">Build</span>
    <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">run</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">cargo build --release --locked</span>
  <span class="hljs-punctuation hljs-definition hljs-block hljs-sequence hljs-item hljs-yaml">-</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">Upload binary</span>
    <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">uses</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">svenstaro/upload-release-action@v1-release</span>
    <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">with</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span>
      <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">repo_token</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">${{ secrets.GITHUB_TOKEN }}</span>
      <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">file</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">target/release/${{ matrix.artifact_name }}</span>
      <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">asset_name</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">${{ matrix.asset_name }}</span>
      <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml"><span class="hljs-entity hljs-name hljs-tag hljs-yaml">tag</span></span><span class="hljs-punctuation hljs-separator hljs-key-value hljs-mapping hljs-yaml">:</span> <span class="hljs-string hljs-unquoted hljs-plain hljs-out hljs-yaml">${{ github.event.client_payload.new_version }}</span>
</span></code></pre></li>
      </ul>    </li>
    <li>Manually Triggering Workflows
      <ul class="list-bullet">
        <li>Repository dispatch: <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#repository_dispatch">https://docs.github.com/en/actions/reference/events-that-trigger-workflows#repository_dispatch</a></li>
      </ul>    </li>
  </ul>

