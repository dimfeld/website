---
title: "sqlx"
tags: Rust
date: 2021-03-19
updated: 2021-03-19
---


  <ul class="list-bullet">
    <li>Migrations
      <ul class="list-bullet">
        <li>To update the checksum of a migration when the file changed, you can recalculate the hash
          <ul class="list-bullet">
            <li><code>cat migrations/FILENAME.sql | openssl dgst -sha384 | cut -d &#39; &#39; -f 2</code></li>
          </ul>        </li>
        <li>Then change the checksum for that row in the database: 
          <ul class="list-bullet">
            <li>
<pre><code><span class="sy-source sy-sql"><span class="sy-keyword sy-other sy-DML sy-sql">update</span> _sqlx_migrations 
	<span class="sy-keyword sy-other sy-DML sy-sql">set</span> checksum<span class="sy-keyword sy-operator sy-comparison sy-sql">=</span><span class="sy-string sy-quoted sy-single sy-sql"><span class="sy-punctuation sy-definition sy-string sy-begin sy-sql">&#39;</span><span class="sy-constant sy-character sy-escape sy-sql">\x</span>&lt;the checksum&gt;<span class="sy-punctuation sy-definition sy-string sy-end sy-sql">&#39;</span></span>
  <span class="sy-keyword sy-other sy-DML sy-sql">where</span> version <span class="sy-keyword sy-operator sy-comparison sy-sql">=</span><span class="sy-string sy-quoted sy-single sy-sql"><span class="sy-punctuation sy-definition sy-string sy-begin sy-sql">&#39;</span>&lt;the version&gt;<span class="sy-punctuation sy-definition sy-string sy-end sy-sql">&#39;</span></span>;
</span></code></pre></li>
          </ul>        </li>
      </ul>    </li>
  </ul>

