@import 'highlight.js/styles/vs.css';
@import './katex.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  * {
    position: relative;
  }

  body {
    font-family: 'Inter', 'Open Sans', 'Helvetica', 'Verdana', sans-serif;
    font-size: 16px;
  }

  article {
    max-width: 65ch;
    @apply ml-auto mr-auto leading-relaxed;
  }

  article > ul {
    @apply my-4;
  }

  article > ol {
    @apply my-4;
  }

  article ol:not(.list-document) > li {
    @apply list-inside list-decimal;
  }

  article ul:not(.list-document) > li {
    @apply list-inside list-disc;
  }

  article ul li,
  article ol li {
    @apply my-2 ml-4;
  }

  article .content.no-indent > ul > li,
  article .content.no-indent > ol > li {
    @apply ml-0;
  }

  article p > img:only-child {
    @apply mx-auto;
  }

  blockquote {
    @apply my-4 -ml-2 border-l-4 border-teal-600 pl-3 pr-4 italic;
  }

  code,
  pre {
    @apply font-mono leading-snug;
    box-decoration-break: clone;
  }

  code {
    @apply bg-gray-200 px-1 text-base text-teal-900;
  }

  a code {
    @apply underline;
  }

  pre > code {
    @apply my-4 block overflow-x-auto whitespace-pre border-gray-300 bg-gray-200 px-4 py-2 text-black shadow-lg;
  }

  article h1 + p,
  article h2 + p,
  article h3 + p,
  article h4 + p {
    @apply mt-2 mb-4;
  }

  article * + p,
  article > * + div,
  hr {
    @apply my-4;
  }

  article table {
    @apply inline-block overflow-hidden border-b border-gray-200 align-middle font-sans shadow;
  }

  article table th {
    @apply border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-xs font-medium uppercase leading-4 tracking-wider text-gray-500;
  }
  article table td {
    @apply whitespace-nowrap px-6 py-4 text-sm font-medium leading-5 text-gray-900;
  }

  @screen sm {
    article table {
      @apply rounded-lg;
    }
  }

  hr.footnotes-sep {
    @apply mt-8;
  }

  a {
    @apply text-teal-700;
  }

  a:hover {
    text-decoration: underline;
  }

  h1,
  h2,
  h3,
  h4 {
    @apply font-sans font-medium text-teal-900;
  }

  h1 {
    @apply text-2xl;
  }

  h2 {
    @apply text-xl;
  }

  h3 {
    @apply text-lg;
  }

  h4 {
    @apply text-base;
  }

  h1:not(:first-child),
  h2:not(:first-child),
  h3:not(:first-child),
  h4:not(:first-child) {
    @apply mt-4 mb-2;
  }

  svg .primary {
    fill: #b2f5ea;
  }

  svg .secondary {
    fill: #2c7a7b;
    color: #2c7a7b;
  }

  .hljs-addition {
    @apply text-green-600;
  }

  .hljs-deletion {
    @apply text-red-600;
  }

  article aside.note {
    @apply border border-gray-300 bg-teal-100 bg-opacity-75 px-4 py-4 text-sm;
  }

  article aside.warn {
    @apply border border-gray-300 bg-yellow-100 bg-opacity-75 px-4 py-4 text-sm;
  }

  div.responsive-svg {
    @apply my-4 mx-auto w-full;
  }

  @screen sm {
    div.responsive-svg {
      @apply w-3/4;
    }
  }

  @screen md {
    div.responsive-svg {
      @apply w-1/2;
    }
  }

  /* From https://css-tricks.com/full-width-containers-limited-width-parents/ */
  .w-expanded-95 {
    width: 95vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -47.5vw;
    margin-right: -47.5vw;
  }

  /* Mobile styling */
  .side-by-side {
    display: block;
    @apply my-4;
  }
}

@screen sm {
  html {
    article ul li,
    article ol li {
      @apply list-outside;
    }

    article > ul > li,
    article > ol > li {
      @apply ml-0;
    }

    blockquote {
      @apply -ml-4 pl-6 pr-0;
    }

    pre > code {
      @apply whitespace-pre-wrap;
    }
  }
}

@screen md {
  html {
    .side-by-side {
      display: grid;
      grid-template-columns: minmax(30%, 60ch) minmax(70%, 1fr);
      width: 95vw;
      position: relative;
      left: 50%;
      right: 50%;
      @apply my-8;
      margin-left: max(-47.5vw, -70ch);
      margin-right: max(-47.5vw, -70ch);
      max-width: 140ch;

      & > * {
        @apply border-t border-dotted border-gray-400;
      }

      .left {
        @apply mb-4 pr-2;

        ul > li,
        ol > li {
          @apply list-inside;
        }
      }

      pre {
        @apply h-full w-full;
      }

      pre > code {
        @apply my-0 block h-full w-full overflow-x-auto whitespace-pre-wrap bg-gray-200 px-4 py-0 text-black shadow-none;
      }
    }
  }
}

article .has-component > *:not(:last-child) {
  display: none;
}

article.pkm-page {
  ul,
  ol {
    margin-top: 0rem;
    margin-bottom: 0rem;
  }

  li {
    @apply my-2;
  }

  ul.list-document > li {
    list-style: none;
    @apply my-4;
  }

  blockquote {
    @apply ml-0 px-3;
  }

  li ul > li,
  li ol > li {
    margin-left: 2rem;
  }
}
